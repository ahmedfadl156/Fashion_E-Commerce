<section class="shop-products">
        <div class="text-container text-center top-header rounded-3 py-5 m-5">
            <h1 class="py-3 text-white">shop all Products</h1>
        </div>
        <div class="container py-5">
            <div class="row">
                <div class="col-md-3 d-flex flex-column gap-4 bg-primary rounded-2 p-4 filter-items">
                    <div class="search-box">
                        <h4 class="fw-bold mb-3">Search</h4>
                        <div class="input-group mb-3">
                            <input type="text" class="form-control" placeholder="Search For Product..." 
                                   [(ngModel)]="searchQuery" aria-label="Search For Product">
                        </div>
                    </div>
                    <div class="prices">
                        <h4 class="fw-bold mb-3">prices</h4>
                        <div class="range d-flex justify-content-between">
                            <p class="fw-bold">range</p>
                            <span class="fw-bold">
                                {{startvalue | currency}} - {{endvalue | currency}} 
                            </span>
                        </div>
                        <mat-slider min="0" max="5000" discrete="true">
                            <input value="100" matSliderStartThumb [(value)]="startvalue" aria-label="Minimum price slider">
                            <input value="400" matSliderEndThumb [(value)]="endvalue" aria-label="Maximum price slider">
                          </mat-slider>
                    </div>
                    <div class="filters">
                        <h4 class="fw-bold mb-4">Categories</h4>
                        <ul class="list-unstyled">
                            <li class="list-item">
                            <p class="d-flex gap-3 align-items-center">
                                <input type="checkbox" (change)="updateSelection('category', 'Men', $any($event.target).checked)" aria-label="men category">
                                men
                            </p>
                            </li>
                            <li class="list-item">
                            <p class="d-flex gap-3 align-items-center">
                                <input type="checkbox" (change)="updateSelection('category', 'Women', $any($event.target).checked)" aria-label="women category">
                                women
                            </p>
                            </li>
                            <li class="list-item">
                            <p class="d-flex gap-3 align-items-center">
                                <input type="checkbox" (change)="updateSelection('category', 'Kids', $any($event.target).checked)" aria-label="babies category">
                                Kids
                            </p>
                            </li>
                            <li class="list-item">
                            <p class="d-flex gap-3 align-items-center">
                                <input type="checkbox" (change)="updateSelection('category', 'ladies', $any($event.target).checked)" aria-label="ladies category">
                                ladies
                            </p>
                            </li>
                        </ul>
                    </div>
                    <div class="brands">
                        <h4 class="fw-bold mb-4">brands</h4>
                        <ul class="list-unstyled">
                            <li class="list-item">
                            <p class="d-flex gap-3 align-items-center">
                                <input type="checkbox" (change)="updateSelection('brand', 'H&M', $any($event.target).checked)" aria-label="h&m brand">
                                h&m
                            </p>
                            </li>
                            <li class="list-item">
                            <p class="d-flex gap-3 align-items-center">
                                <input type="checkbox" (change)="updateSelection('brand', 'Gucci', $any($event.target).checked)" aria-label="gucci brand">
                                gucci
                            </p>
                            </li>
                            <li class="list-item">
                            <p class="d-flex gap-3 align-items-center">
                                <input type="checkbox" (change)="updateSelection('brand', 'Fendi', $any($event.target).checked)" aria-label="fendi brand">
                                fendi
                            </p>
                            </li>
                            <li class="list-item">
                            <p class="d-flex gap-3 align-items-center">
                                <input type="checkbox" (change)="updateSelection('brand', 'Zara', $any($event.target).checked)" aria-label="zara brand">
                                zara
                            </p>
                            </li>
                            <li class="list-item">
                            <p class="d-flex gap-3 align-items-center">
                                <input type="checkbox" (change)="updateSelection('brand', 'Chanel', $any($event.target).checked)" aria-label="chanel brand">
                                chanel
                            </p>
                            </li>
                            <li class="list-item">
                            <p class="d-flex gap-3 align-items-center">
                                <input type="checkbox" (change)="updateSelection('brand', 'versace', $any($event.target).checked)" aria-label="versace brand">
                                versace
                            </p>
                            </li>
                            <li class="list-item">
                            <p class="d-flex gap-3 align-items-center">
                                <input type="checkbox" (change)="updateSelection('brand', 'mark & spencer', $any($event.target).checked)" aria-label="mark & spencer brand">
                                mark & spencer
                            </p>
                            </li>
                            <li class="list-item">
                            <p class="d-flex gap-3 align-items-center">
                                <input type="checkbox" (change)="updateSelection('brand', 'victoria\'s secret', $any($event.target).checked)" aria-label="victoria's secret brand">
                                victoria's secret
                            </p>
                            </li>
                            <li class="list-item">
                            <p class="d-flex gap-3 align-items-center">
                                <input type="checkbox" (change)="updateSelection('brand', 'Dior', $any($event.target).checked)" aria-label="dior brand">
                                dior
                            </p>
                            </li>
                        </ul>
                    </div>
                    <div class="categories">
                        <h4 class="fw-bold mb-4">filters</h4>
                        <ul class="list-unstyled">
                            <li class="list-item">
                            <p class="d-flex gap-3 align-items-center">
                                <input type="checkbox" (change)="updateSelection('filters', 'Dress', $any($event.target).checked)" aria-label="dresses category">
                                dress
                            </p>
                            </li>
                            <li class="list-item">
                            <p class="d-flex gap-3 align-items-center">
                                <input type="checkbox" (change)="updateSelection('filters', 'Top', $any($event.target).checked)" aria-label="tops category">
                                top
                            </p>
                            </li>
                            <li class="list-item">
                            <p class="d-flex gap-3 align-items-center">
                                <input type="checkbox" (change)="updateSelection('filters', 'Blous', $any($event.target).checked)" aria-label="blouse category">
                                blouse
                            </p>
                            </li>
                            <li class="list-item">
                            <p class="d-flex gap-3 align-items-center">
                                <input type="checkbox" (change)="updateSelection('filters', 'T-Shirt', $any($event.target).checked)" aria-label="t-shirts category">
                                t-shirt
                            </p>
                            </li>
                            <li class="list-item">
                            <p class="d-flex gap-3 align-items-center">
                                <input type="checkbox" (change)="updateSelection('filters', 'Shirt', $any($event.target).checked)" aria-label="shirts category">
                                shirt
                            </p>
                            </li>
                            <li class="list-item">
                            <p class="d-flex gap-3 align-items-center">
                                <input type="checkbox" (change)="updateSelection('filters', 'Hoodie', $any($event.target).checked)" aria-label="hoodies category">
                                hoodie
                            </p>
                            </li>
                        </ul>
                    </div>
                    <div class="sizes">
                        <h4 class="fw-bold mb-4">sizes</h4>
                        <ul class="list-unstyled">
                            <li class="list-item">
                            <p class="d-flex gap-3 align-items-center">
                                <input type="checkbox" (change)="updateSelection('size', 'Medium', $any($event.target).checked)" aria-label="medium size">
                                medium
                            </p>
                            </li>
                            <li class="list-item">
                            <p class="d-flex gap-3 align-items-center">
                                <input type="checkbox" (change)="updateSelection('size', 'Large', $any($event.target).checked)" aria-label="large size">
                                large
                            </p>
                            </li>
                            <li class="list-item">
                            <p class="d-flex gap-3 align-items-center">
                                <input type="checkbox" (change)="updateSelection('size', 'Plus', $any($event.target).checked)" aria-label="plus size">
                                plus
                            </p>
                            </li>
                        </ul>
                    </div>
                    <button class="apply-changes" (click)="applyFilters()">apply changes</button>
                </div>
                <div class="col-md-9">
                    <div #productlist class="row ms-5 g-3 ">
                        <div *ngIf="isLoading" class="text-center">
                            <div class="spinner-border" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
            
                        <div class="col-md-4" *ngFor="let product of displayedProducts">
                            <div class="card h-100" (click)="onSelectProduct(product._id)">
                                <img [src]="product.image" class="card-img-top" [alt]="product.name" [title]="product.name">
                                <div class="card-body d-flex flex-column">
                                    <h4 class="card-title">{{product.name}}</h4>
                                    <p class="fw-bold text-center mb-0 fs-5">{{product.price | currency}}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <mat-paginator [length]="products.length"
                                   [pageSize]="itemsPerPage"
                                   [pageSizeOptions]="[8, 16, 32]"
                                   (page)="onPageChange($event)">
                    </mat-paginator>
                </div>
            </div>
        </div>
</section>